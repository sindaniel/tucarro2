<div class="row">
  <div class="col-lg-12">
    <h1 class="page-header">
      Camiones <small>/ Editar</small>
    </h1>
    <%= render 'admin/includes/top' %>
  </div>
</div>

<!-- /.row -->
<%  if @truck.errors.any? %>
    <div class="panel panel-danger">
      <div class="panel-heading">
        <%= pluralize(@truck.errors.count, "Errores") %> tratando de guardar:
      </div>
      <p>
      <ul>
        <% @truck.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
        <% end %>
      </ul>
      </p>
    </div>
<% end %>
<!-- /.row -->


<div class="row">
<div class="col-md-12">



<%= form_for @truck, :url => admin_truck_path, :method=>'PATCH' do |f|  %>

    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :nombre, 'Nombre de camion' %>
          <%= f.text_field :nombre, :class =>'form-control'  %>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :modelo, 'Modelo' %>
          <%= f.text_field :modelo, :class =>'form-control'  %>
        </div>
      </div>

    </div>


    <div class="row">
      <div class="col-md-12">
        <div class="form-group">
          <%= f.label :price, 'Precio' %>
          <%= f.text_field :price, :class =>'form-control'  %>
        </div>
      </div>



    </div>



    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :state_id, 'Departamento' %>
          <%= f.collection_select :state_id, State.order(:name),:id,:name, {prompt: 'Selecccione'}, {class: 'form-control'} %>
        </div>
      </div>


      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :city_id, 'Ciudad' %>
          <%= f.select(:city_id, [['Seleccione departamento','' ]], {}, { :class => 'form-control' }) %>
        </div>
      </div>



    </div>



      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <%= f.label :placa_state_id, 'Departamento placa' %>
            <%= f.collection_select :placa_state_id, State.order(:name),:id,:name, {prompt: 'Selecccione'}, {class: 'form-control'} %>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group">
            <%= f.label :placa_city_id, 'Ciudad placa' %>
            <%= f.select(:placa_city_id, [['','' ]], {}, { :class => 'form-control' }) %>
          </div>
        </div>

      </div>




    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :brand_truck_id, 'Marca de camion' %>
          <%= f.collection_select :brand_truck_id, BrandTruck.order(:name),:id,:name, {prompt: 'Selecccione'}, {class: 'form-control'} %>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :type_truck_id, 'Tipo de camion' %>
          <%= f.collection_select :type_truck_id, TypeTruck.order(:name),:id,:name, {prompt: 'Selecccione'}, {class: 'form-control'} %>
        </div>
      </div>

    </div>





    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :kilometraje, 'Kilometraje' %>
          <%= f.text_field :kilometraje, :class =>'form-control'  %>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :estado, 'Estado' %>

          <%= f.select(:estado, [['Nuevo', 0], ['Usado', 1]], {include_blank: 'Selecccione'}, { :class => 'form-control' }) %>
        </div>
      </div>

    </div>




    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :placa, 'Placa' %>
          <%= f.text_field :placa, :class =>'form-control'  %>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :ubicacionplaca, 'Ubicacion placa' %>
          <%= f.text_field :ubicacionplaca, :class =>'form-control'  %>
        </div>
      </div>

    </div>



    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :color, 'Color' %>
          <%= f.text_field :color, :class =>'form-control'  %>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :tipocombustible, 'Tipo combustible' %>
          <%= f.select(:tipocombustible, [['Gasolina', 0], ['Gas', 1], ['ACPM', 2]], {include_blank: 'Selecccione'}, { :class => 'form-control' }) %>
        </div>
      </div>
    </div>



    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :marcamotor, 'Marca motor' %>
          <%= f.text_field :marcamotor, :class =>'form-control'  %>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :marcacaja, 'Marca caja' %>
          <%= f.text_field :marcacaja, :class =>'form-control'  %>
        </div>
      </div>
    </div>



    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :marcatransmision, 'Marca transmision' %>
          <%= f.text_field :marcatransmision, :class =>'form-control'  %>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :tipocupo, 'Tipo Cupo' %>
          <%= f.text_field :tipocupo, :class =>'form-control'  %>
        </div>
      </div>
    </div>



    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :empresaafiliada, 'Empresa Afiliada' %>
          <%= f.text_field :empresaafiliada, :class =>'form-control'  %>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :marcacarpa, 'Marca Carpa' %>
          <%= f.text_field :marcacarpa, :class =>'form-control'  %>
        </div>
      </div>
    </div>



    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :capacidadcarga, 'Capacidad Carga' %>
          <%= f.text_field :capacidadcarga, :class =>'form-control'  %>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :capacidadpasajeros, 'Capacidad pasajeros' %>
          <%= f.text_field :capacidadpasajeros, :class =>'form-control'  %>
        </div>
      </div>
    </div>



    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :cilindrajecc, 'Cilindraje CC' %>
          <%= f.text_field :cilindrajecc, :class =>'form-control'  %>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :numeroejes, 'Numero Ejes' %>
          <%= f.text_field :numeroejes, :class =>'form-control'  %>
        </div>
      </div>
    </div>



    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :estadollantas, 'Estado de llantas' %>
          <%= f.select(:estadollantas, [['Excelente', 0], ['Bueno', 1], ['Regular', 2], ['Malo', 2]], {include_blank: 'Selecccione'}, { :class => 'form-control' }) %>
        </div>
      </div>


      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :tipodecaja, 'Tipo de caja' %>
          <%= f.select(:tipodecaja, [['Automatica', 0], ['Manual', 1]], {include_blank: 'Selecccione'}, { :class => 'form-control' }) %>

        </div>
      </div>


    </div>








    <div class="row">
      <div class="col-md-12">
        <%= f.label :descripccion, 'Descripccion' %>
        <%= f.text_area :descripccion, :class =>'form-control'  %> <br/> <br/> <br/> <br/>
      </div>
    </div>



    <div class="row">
      <div class="col-md-3">
        <div class="form-group">
          <label>
            <%= f.check_box :quintarueda  %> Quinta rueda
          </label>
          <br/>
          <label>
            <%= f.check_box :trailer  %> Trailer
          </label>
          <br/>
          <label>
            <%= f.check_box :negociable  %> Negociable
          </label>
          <br/>
          <label>
            <%= f.check_box :vigia  %> Vigia
          </label> <br/>
          <label>
            <%= f.check_box :motorreparado  %> Motor Reparado
          </label> <br/>
          <label>
            <%= f.check_box :cajareparada  %> Caja reparado
          </label> <br/>
          <label>
            <%= f.check_box :transmisionreparada  %> Transmision reparada
          </label> <br/>
          <label>
            <%= f.check_box :frenosabs  %> Frenos Abs
          </label> <br/>
          <label>
            <%= f.check_box :cupo  %> Cupo
          </label> <br/>



        </div>
      </div>


      <div class="col-md-3">

        <div class="form-group">

          <label>
            <%= f.check_box :sillareclinable  %> Silla Reclinable
          </label> <br/>
          <label>
            <%= f.check_box :bano  %> Baño
          </label> <br/>
          <label>
            <%= f.check_box :descansapies  %> Descansa pies
          </label>
          <br/>
          <label>
            <%= f.check_box :tv  %> Tv
          </label><br/>
          <label>
            <%= f.check_box :pantallaindividual  %> Pantall individual
          </label><br/>
          <label>
            <%= f.check_box :wifi  %> Wifi
          </label><br/>
          <label>
            <%= f.check_box :audio  %> Audio
          </label><br/>
          <label>
            <%= f.check_box :unicodueno  %> Unico dueño
          </label>
        </div>
      </div>

      <div class="col-md-6">

      </div>
    </div>



    <div class="row">
      <div class="col-md-2">
        <div class="form-group">
          <%= f.label :picture1, 'Imagen 1' %>
          <%= f.file_field :picture1, :class =>'form-control'  %>

          <% if @truck.picture1.to_s  != '/images/missing.png' %>
              <%= image_tag @truck.picture1(:home ), :class=>'img-thumbnail img-responsive' %>
          <% end %>
        </div>
      </div>

      <div class="col-md-2">
        <div class="form-group">
          <%= f.label :picture2, 'Imagen 2' %>
          <%= f.file_field :picture2, :class =>'form-control'  %>

          <% if @truck.picture2.to_s  != '/images/missing.png' %>
              <%= image_tag @truck.picture2(:home ), :class=>'img-thumbnail img-responsive' %>
          <% end %>

        </div>
      </div>

      <div class="col-md-2">
        <div class="form-group">
          <%= f.label :picture3, 'Imagen 3' %>
          <%= f.file_field :picture3, :class =>'form-control'  %>
          <% if @truck.picture3.to_s  != '/images/missing.png' %>
              <%= image_tag @truck.picture3(:home ), :class=>'img-thumbnail img-responsive' %>
          <% end %>

        </div>
      </div>

      <div class="col-md-2">
        <div class="form-group">
          <%= f.label :picture4, 'Imagen 4' %>
          <%= f.file_field :picture4, :class =>'form-control'  %>


          <% if @truck.picture4.to_s  != '/images/missing.png' %>
              <%= image_tag @truck.picture4(:home ), :class=>'img-thumbnail img-responsive' %>
          <% end %>


        </div>
      </div>

      <div class="col-md-2">
        <div class="form-group">
          <%= f.label :picture5, 'Imagen 5' %>
          <%= f.file_field :picture5, :class =>'form-control'  %>


          <% if @truck.picture5.to_s  != '/images/missing.png' %>
              <%= image_tag @truck.picture5(:home ), :class=>'img-thumbnail img-responsive' %>
          <% end %>
        </div>
      </div>
    </div>




    <%= f.submit 'Guardar', :class=> 'btn btn-info' %>
    <%=  link_to 'Cancelar', admin_trucks_path, :class=>'btn btn-warning' %>
<% end %>



</div>
</div>





<script>
    var ready;
    ready = function() {
        //evento cuando carga
        $('#truck_state_id').on('change', function() {

            $('#truck_city_id option').html('')
            function loader(data){
                $('#truck_city_id option').html('Cargando...')
            };

            function error(data){
                alert("Error enviados los datos");
            };



            $.ajax({
                async: true,
                type: "GET",
                dataType: 'json',
                beforeSend:loader,
                error:error,
                success: function (msg) {


                    $('#truck_city_id').html('')


                    $.each(msg, function(index, value) {
                        console.log('<option value="'+value.id+'">'+value.name+'</option>');
                        $('#truck_city_id').append('<option value="'+value.id+'">'+value.name+'</option>')
                    });

                },
                url:"/admin/states/"+this.value+"/cities.json"
            });

        });





        $('#truck_placa_state_id').on('change', function() {

            $('#truck_placa_city_id option').html('')
            function loader(data){
                $('#truck_placa_city_id option').html('Cargando...')
            };

            function error(data){
                alert("Error enviados los datos");
            };



            $.ajax({
                async: true,
                type: "GET",
                dataType: 'json',
                beforeSend:loader,
                error:error,
                success: function (msg) {


                    $('#truck_placa_city_id').html('')


                    $.each(msg, function(index, value) {
                        console.log('<option value="'+value.id+'">'+value.name+'</option>');
                        $('#truck_placa_city_id').append('<option value="'+value.id+'">'+value.name+'</option>')
                    });

                },
                url:"/admin/states/"+this.value+"/cities.json"
            });

        });



        //Cargo dato cuando carga la pagina



        function loader(data){
            $('#truck_city_id option').html('Cargando...')

        };

        function error(data){
            alert("Error enviados los datos");
        };



        $.ajax({
            async: true,
            type: "GET",
            dataType: 'json',
            beforeSend:loader,
            error:error,
            success: function (msg) {

    console.log(msg)
                $('#truck_city_id').html('')


                $.each(msg, function(index, value) {
                    console.log('<option value="'+value.id+'">'+value.name+'</option>');
                    if(value.id == '<%= @truck.city_id %>'){
                        $('#truck_city_id').append('<option selected value="'+value.id+'">'+value.name+'</option>')
                    }else{
                        $('#truck_city_id').append('<option value="'+value.id+'">'+value.name+'</option>')
                    }

                });


            },
            url:"/admin/states/<%= @truck.state_id %>/cities.json"
        });






        function loader(data){

            $('#truck_placa_city_id option').html('Cargando...')
        };

        function error(data){
            alert("Error enviados los datos");
        };



        $.ajax({
            async: true,
            type: "GET",
            dataType: 'json',
            beforeSend:loader,
            error:error,
            success: function (msg) {

                console.log(msg)

                $('#truck_placa_city_id').html('')





                $.each(msg, function(index, value) {
                    console.log('<option value="'+value.id+'">'+value.name+'</option>');
                    if(value.id == '<%= @truck.city_id %>'){
                        $('#truck_placa_city_id').append('<option selected value="'+value.id+'">'+value.name+'</option>')
                    }else{
                        $('#truck_placa_city_id').append('<option value="'+value.id+'">'+value.name+'</option>')
                    }

                });

            },
            url:"/admin/states/<%= @truck.placa_state_id %>/cities.json"
        });









    };

    $(document).ready(ready);
    $(document).on('page:load', ready);


</script>





